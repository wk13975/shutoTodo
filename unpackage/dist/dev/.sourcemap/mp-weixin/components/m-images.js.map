{"version":3,"sources":["webpack:///G:/uniworkpace/loginDemo/components/m-images.vue?a0d4","webpack:///G:/uniworkpace/loginDemo/components/m-images.vue?24b0","webpack:///G:/uniworkpace/loginDemo/components/m-images.vue?516b","webpack:///G:/uniworkpace/loginDemo/components/m-images.vue?7870","webpack:///G:/uniworkpace/loginDemo/components/m-images.vue"],"names":["that","name","props","imgs","type","Array","default","upUrl","String","formId","max","Number","tablename","canUp","Boolean","data","nowImgs","urls","ownertable","ownerid","watch","handler","newObj","oldObj","console","log","map","item","index","base64","BASE64","undefined","replace","URL","immediate","deep","newId","oldId","methods","delImg","e","http","$http","url","uni","showModal","content","title","success","res","confirm","showLoading","delete","then","updataImgs","catch","err","JSON","stringify","showToast","icon","cancel","showImg","current","previewImage","longPressActions","itemList","tapIndex","fail","errMsg","uploadImg","chooseImage","count","length","tempFilePaths","i","src","indexOf","substr","upload","filePath","META","SUCCESS","img","DATA","push","update","MESSAGE","replaceBase64","$emit","get","hideLoading"],"mappings":"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","file":"components/m-images.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./m-images.vue?vue&type=template&id=4bd2c2b5&\"\nvar renderjs\nimport script from \"./m-images.vue?vue&type=script&lang=js&\"\nexport * from \"./m-images.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uniworkpace/loginDemo/components/m-images.vue\"\nexport default component.exports","export * from \"-!../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./m-images.vue?vue&type=template&id=4bd2c2b5&\"","var components = {\n  \"uni-icons\": function() {\n    return import(\n      /* webpackChunkName: \"components/uni-icons/uni-icons\" */ \"@/components/uni-icons/uni-icons.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.imgs, function(img, index) {\n    var m0 = _vm.replaceBase64(img.BASE64)\n    return {\n      $orig: _vm.__get_orig(img),\n      m0: m0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../app/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./m-images.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../app/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../app/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./m-images.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar that;\nexport default {\n\tname: 'my-images',\n\tprops: {\n\t\timgs: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [{\n\t\t\t\t\"URL\": \"https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2948076586,1525129381&fm=26&gp=0.jpg\",\n\t\t\t\t\"DOCLINKSID\": 3907,\n\t\t\t\t\"DOCINFOID\": 4007,\n\t\t\t\t\"NAME\": \"12.jpg\",\n\t\t\t\t\"BASE64\": null,\n\t\t\t\t\"DOCTYPE\": \"Attachments\",\n\t\t\t\t\"OWNERTABLE\": \"workorder\",\n\t\t\t\t\"OWNERID\": 14802,\n\t\t\t\t\"OPERATOR\": \"MAXADMIN\"\n\t\t\t}]\n\t\t},\n\t\tupUrl: {\n\t\t\ttype: String,\n\t\t\tdefault: \"\"\n\t\t},\n\t\tformId: {\n\t\t\ttype: String,\n\t\t\tdefault: \"\"\n\t\t},\n\t\tmax: {\n\t\t\ttype: Number,\n\t\t\tdefault: 9\n\t\t},\n\t\ttablename: {\n\t\t\ttype: String,\n\t\t\tdefault: \"\"\n\t\t},\n\t\tcanUp: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tnowImgs: this.imgs,\n\t\t\turls: [],\n\t\t\townertable: this.tablename,\n\t\t\townerid: this.formId\n\t\t};\n\t},\n\twatch: {\n\t\timgs: {\n\t\t\thandler(newObj, oldObj) {\n\t\t\t\tconsole.log('更新照片列表')\n\t\t\t\tthis.nowImgs = newObj;\n\t\t\t\tthis.urls = this.nowImgs.map(function(item, index, newObj) {\n\t\t\t\t\tlet base64 = item.BASE64\n\t\t\t\t\tif (base64 != null && base64 != undefined)\n\t\t\t\t\t\treturn item.BASE64.replace(/[\\r\\n]/g, \"\")\n\t\t\t\t\treturn item.URL;\n\t\t\t\t})\n\t\t\t},\n\t\t\timmediate: true,\n\t\t\tdeep: true,\n\t\t},\n\t\tformId: {\n\t\t\thandler(newId, oldId) {\n\t\t\t\tconsole.log(\"new\" + newId + \"========old\" + oldId)\n\t\t\t\tthis.ownerid = newId\n\t\t\t}\n\t\t}\n\n\t},\n\tmethods: {\n\t\tdelImg(e) {\n\t\t\tthat = this;\n\t\t\tconsole.log(\"长按删除照片:\" + e);\n\t\t\tlet http = this.$http\n\t\t\tlet url = this.upUrl + e;\n\t\t\tif (this.canUp)\n\t\t\t\tuni.showModal({\n\t\t\t\t\tcontent: \"确认删除照片?\",\n\t\t\t\t\ttitle: \"照片删除\",\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tconsole.log('用户点击确定');\n\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\ttitle: \"删除中,请稍后...\"\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\thttp.delete(url).then(res => {\n\n\t\t\t\t\t\t\t\t//this.updata(this.nowImgs.filter(img => img.DOCINFOID != e));\n\t\t\t\t\t\t\t\tthat.updataImgs()\n\t\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\t\tconsole.log(JSON.stringify(err))\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: \"后台删除失败,请稍后再试\",\n\t\t\t\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tthat.updataImgs()\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\t\tconsole.log('用户点击取消');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\tshowImg(current) {\n\t\t\tuni.previewImage({\n\t\t\t\tcurrent: current,\n\t\t\t\turls: this.urls,\n\t\t\t\tlongPressActions: {\n\t\t\t\t\titemList: ['发送给朋友', '保存图片', '收藏'],\n\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\tconsole.log('选中了第' + (data.tapIndex + 1) + '个按钮,第' + (data.index + 1) + '张图片');\n\t\t\t\t\t},\n\t\t\t\t\tfail: function(err) {\n\t\t\t\t\t\tconsole.log(err.errMsg);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tuploadImg() {\n\t\t\tthat = this;\n\t\t\tconsole.log(this.nowImgs)\n\t\t\tlet http = this.$http;\n\t\t\tlet imgs = this.nowImgs\n\t\t\tlet url = \"/mem\" + this.upUrl + this.ownertable + \"/\" + this.ownerid + \"?doctype=Attachments\"\n\t\t\tif (this.canUp)\n\t\t\t\tuni.chooseImage({\n\t\t\t\t\tcount: this.max - imgs.length,\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tconsole.log(JSON.stringify(res.tempFilePaths));\n\t\t\t\t\t\tlet i = 0;\n\t\t\t\t\t\twhile (i < res.tempFilePaths.length) {\n\n\t\t\t\t\t\t\tlet src = res.tempFilePaths[i];\n\t\t\t\t\t\t\tif (src.indexOf(\"wxfile\") < 0)\n\t\t\t\t\t\t\t\tsrc = src.substr(src.indexOf(\"http\"))\n\t\t\t\t\t\t\tconsole.log(\"地址:\" + src)\n\t\t\t\t\t\t\t/* imgs.push({\n\t\t\t\t\t\t\t\tURL: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1586408173757&di=c52f62f0a2901539ecb7cc700d062afe&imgtype=0&src=http%3A%2F%2Fimg.zcool.cn%2Fcommunity%2F0195f55972f18ca8012193a342310a.gif\"\n\t\t\t\t\t\t\t}); */\n\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\ttitle: \"上传中,请稍后...\"\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\thttp.upload(url, {\n\t\t\t\t\t\t\t\tfilePath: src,\n\t\t\t\t\t\t\t\tname: 'image'\n\t\t\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\t\t\tif (res.data.META.SUCCESS) {\n\t\t\t\t\t\t\t\t\tconsole.log(\"应该上传成功了\")\n\t\t\t\t\t\t\t\t\tconsole.log(JSON.stringify(res.data))\n\t\t\t\t\t\t\t\t\tlet img = res.data.DATA\n\t\t\t\t\t\t\t\t\timgs.push(img)\n\t\t\t\t\t\t\t\t\tthis.update(imgs);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: \"上传失败\" + res.data.META.MESSAGE,\n\t\t\t\t\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthat.updataImgs()\n\t\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\t\tconsole.log(\"出错了\")\n\t\t\t\t\t\t\t\tconsole.log(JSON.stringify(err))\n\t\t\t\t\t\t\t\tif (err == \"\")\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: \"上传成功\",\n\t\t\t\t\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tthat.updataImgs()\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t//imgs.push(src.substr(src.indexOf(\"http\")));\n\n\t\t\t\t\t\t\ti++;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//console.log(imgs);\n\t\t\t\t\t\t//this.$emit(\"updata\",imgs)\n\n\t\t\t\t\t\t//e.push(res.tempFilePaths);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\treplaceBase64(base64) {\n\t\t\tif (base64 != null && base64 != undefined)\n\t\t\t\treturn base64.replace(/[\\r\\n]/g, \"\");\n\t\t},\n\t\tupdate(imgs) {\n\t\t\tthis.$emit(\"update\", imgs);\n\t\t},\n\t\tupdataImgs() {\n\t\t\tthat = this\n\t\t\tconsole.log(\"getImgs\")\n\t\t\tthis.$http.get(\"/imgs/workorder/\" + this.ownerid).then(res => {\n\t\t\t\tif (res.data.META.SUCCESS) {\n\t\t\t\t\tthat.$emit(\"update\", res.data.DATA);\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.log(\"错误: \" + JSON.stringify(err))\n\t\t\t});\n\t\t}\n\n\t}\n}\n"],"sourceRoot":""}